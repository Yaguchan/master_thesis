import numpy as np
import matplotlib.pyplot as plt

# python 4/hist_pred_target.py
def main():
    
    # サンプルデータ
    # data_baseline = [-200, 250, -700, -900, 1000250, -550, -150, 1000100, -100, -400, -200, -100, -600, -150, 1250, 0, 999550, 100, -300, -100, 1000550, -200, -300, -300, 300, -50, -300, -250, -700, 1001650, 1000600, 1000300, 950, 1000300, 1000600, 1000500, -300, -300, -150, -300, -100, -950, -500, 50, 500, -100, 150, 1001000, -200, 250, -200, 1000150, -100, -400, 999900, 1000050, -300, 1000200, -550, -300, 999600, -950, -450, -500, -100, 999600, 0, 999550, 1000450, 400, -950, -300, -550, -200, -200, 550, -400, -150, -50, -50, -150, 600, -50, -600, 300, 999850, -400, -300, -100, -600, -50, -300, -250, -200, 650, -450, -100, 1000100, 0, -150, 350, -800, 150, 550, 300, -800, -50, 1000000, 1000000, -600, -600, -50, 1001400, -350, 1000200, -750, 450, -50, -250, -950, -350, -850, 1000100, -500, -750, -350, -100, -100, -950, 1000050, 999650, -100, -550, 0, 400, -150, 1000100, 500, 999750, -600, -100, -50, -250, -400, -550, 150, 0, -100, 999900, -450, -50, 1000150, -100, -200, -250, -100, 150, -350, -300, -50, -50, 999900, 750, -450, 0, -400, 999700, 150, -900, -600, -50, -250, -250, 150, 999600, -300, 999850, 1000000, 500, -250, -250, -600, 1001150, 1250, 1000050, 500, 1001850, -500, 999950, -50, -600, 1000000, 999800, 350, -750, 999650, -150, 0, -250, 1000250, -100, 1000200, -250, -700, -150, -600, -50, 150, 1350, 650, 1000850, 1000000, 999950, 1000700, -50, -50, -50, -400, -550, -450, 400, 50, -400, 1000900, 400, -200, 0, 300, 2450, -800, -50, 1250, 1000950, 0, 950, 600, 0, -200, -50, -200, -50, 50, 350, -100, -250, -100]
    data_baseline = [119.63426169202762, 87.9284145811514, 811.9662992866465, 967.4763158143016, 22017.855067883163, 682.4022708910284, 139.85047009658547, 21861.50821377265, 99.71251758449904, 342.8345157718487, 176.08480444450447, 131.4404261743505, 814.7732702990671, 139.85047009658547, 662.8791475455804, 0.0, 21300.8325839593, 37.04616369887469, 193.61139739367832, 120.38616943816481, 22221.73096925079, 225.5601744572582, 233.75334467955156, 275.7973220290035, 241.95116928553693, 48.618693149533215, 343.0244432543427, 216.55704885499608, 539.8355302009006, 22665.011045508334, 22249.16834434215, 22058.572551566547, 553.9478080497943, 22058.572551566547, 22249.16834434215, 22192.926324537573, 365.6720950955536, 365.6720950955536, 102.94278654070297, 407.38663514953356, 53.72518926307748, 1003.9940776681915, 490.7359164617875, 28.804644713218067, 241.8214534211723, 143.45272853983548, 82.48348143782715, 22434.747777958746, 274.893154714186, 234.29484422217763, 260.4980900764602, 21920.587089639183, 79.81460512402145, 567.7502063019854, 21601.86262911137, 21799.866517270762, 424.29747776214987, 21972.506558136305, 505.79983970230774, 436.30978012763484, 21333.083256121183, 1003.9940776681915, 347.5888897347876, 694.3871008609024, 67.95736161971308, 21333.083256121183, 0.0, 21300.8325839593, 22162.538258924717, 475.0713146383263, 1157.005387198319, 433.8890107844421, 530.0782771753173, 211.58401707999224, 225.5601744572582, 330.3714221233544, 355.61192715302496, 221.59070659705532, 62.59485052679918, 38.316413053789574, 202.70677116509455, 439.0856777903353, 62.59485052679918, 811.0621319718291, 370.6439290249361, 21542.783753244836, 408.5381057532892, 233.75334467955156, 58.23806860860259, 598.9238528228686, 71.26634499074405, 433.8890107844421, 294.4057501048095, 159.85658447581773, 235.20420194100166, 608.3553608067346, 105.17400501909339, 21861.50821377265, 0.0, 218.15489006381742, 301.03004515206925, 712.9995342886313, 103.96570735816937, 413.9015922027516, 116.69466191912204, 855.3951559404757, 46.52077604888632, 21731.68542144201, 21731.68542144201, 754.5886544401199, 754.5886544401199, 44.711000898165935, 22583.466237184763, 496.4838613112413, 21972.506558136305, 678.0141093676414, 252.42343201169086, 72.18638354909143, 294.4057501048095, 887.4106418515814, 231.9130121750021, 854.5897546202275, 21861.50821377265, 519.1092476988472, 974.027455902288, 316.2695664394951, 66.71567659440598, 87.83846209761145, 1164.9717504338394, 21799.866517270762, 21367.56778488919, 140.11192063829537, 652.4111102652124, 0.0, 301.1438796116102, 139.85047009658547, 21861.50821377265, 182.20135736144812, 21445.515775000855, 695.5385714646579, 87.83846209761145, 39.34236071352984, 332.6844736255516, 512.560640168627, 620.836409940676, 123.29649985852149, 0.0, 146.88854507307337, 21601.86262911137, 409.6921077371525, 74.70216152398194, 21920.587089639183, 52.132186761144794, 287.00046571136875, 361.7026272353507, 95.13946919841953, 47.26557965200857, 365.41064455384367, 365.6720950955536, 46.52077604888632, 46.52077604888632, 21601.86262911137, 292.11466059111547, 477.3836814008405, 0.0, 370.3497470236227, 21404.79829131747, 172.64004086554218, 751.4195472808929, 695.5385714646579, 68.84557564755133, 274.1788676067914, 332.6844736255516, 156.34685411051407, 21333.083256121183, 386.7646542096792, 21542.783753244836, 21731.68542144201, 195.39515546122288, 274.1788676067914, 361.7026272353507, 799.5611058799957, 22493.704224592755, 553.4568703186842, 21799.866517270762, 241.8214534211723, 22725.595966622706, 548.6500263915846, 21663.504325613256, 44.711000898165935, 695.5385714646579, 21731.68542144201, 21490.864284747713, 204.79083356815767, 974.027455902288, 21367.56778488919, 189.23174508571614, 0.0, 258.10479312887855, 22017.855067883163, 111.8714994954932, 21972.506558136305, 349.5953162381679, 777.7363821731562, 153.7926981686266, 598.9238528228686, 51.093824434965825, 86.63008541743034, 584.7062254881487, 273.27029728736386, 22370.850057112573, 21731.68542144201, 21663.504325613256, 22300.593891562985, 27.002580980600897, 57.791318911365636, 48.618693149533215, 567.7502063019854, 652.4111102652124, 587.262801692609, 217.93890324368152, 17.929714971133194, 486.4771717941782, 22392.77351939919, 199.8471948616163, 287.00046571136875, 0.0, 220.4197664012683, 1571.7387924826853, 855.3951559404757, 57.791318911365636, 476.4276222805587, 22414.05572637251, 0.0, 553.9478080497943, 255.34058231623067, 0.0, 182.977931296031, 71.26634499074405, 287.00046571136875, 28.236165326849914, 26.241461633252015, 301.03004515206925, 79.81460512402145, 361.7026272353507, 91.23177694705225]
    # data_proposed = [-200, -50, 999950, 999950, -150, 350, -150, 1000100, -100, -550, -800, -100, -450, -350, 1300, 0, 999550, 400, -200, -100, 1000550, -300, -300, -350, 400, -150, -350, -450, -750, -50, 1000600, 1000300, 950, 1000300, 700, 1200, -50, -250, -150, 1000000, -100, -250, -900, -100, 750, -300, 0, 900, -200, 0, -200, 1000150, -200, 999850, -300, -250, -350, -500, -600, -500, 999600, 999950, -450, -550, -250, 999600, -50, 999550, -450, -50, -950, -300, -450, -450, -250, 450, -450, 999950, -50, 1000750, 999750, -250, -200, -750, -150, 999850, -350, -350, -100, -700, 0, -300, -200, -200, 300, -650, -200, 200, 1000550, -100, 200, -250, -50, 550, 400, -900, -150, 1000000, -450, -600, -850, -150, 400, -800, -700, -300, 500, -250, -200, -300, -450, 1000050, 1000100, -400, -900, -350, -800, -250, 999600, 1000050, 999650, -200, -650, 0, 400, -200, 1000100, 400, 999750, 1000000, -300, -50, -500, -850, -350, 0, -50, -100, 999900, -650, 50, 1000150, -100, -250, -300, -250, 200, -350, -250, -50, -100, 999900, 800, -350, -200, -250, 999700, 50, -150, -650, -50, -400, -250, 200, 999600, -250, 999850, 1000000, 350, -250, -550, -550, 1001150, 1100, 1000050, 350, 1001850, 1000100, 999950, -350, -650, 1000000, 999800, 1000700, -750, 999650, -300, -50, -350, 500, -100, 1000200, -300, -700, -200, -550, -50, 550, 1100, 750, 1000850, 1000000, -50, -250, -150, -250, -100, -400, 250, 999950, 0, 0, -400, 1000900, 400, -350, -50, -450, 2450, -800, -150, 1250, 0, 0, 500, 500, -100, -300, 450, -150, -100, -400, 50, -150, -350, -300]
    data_proposed = [119.63426169202762, 29.69453460078921, 21663.504325613256, 21663.504325613256, 162.96532393045902, 330.421069492073, 139.85047009658547, 21861.50821377265, 99.71251758449904, 452.45393491038317, 604.2896084009362, 131.4404261743505, 625.541525213351, 304.51810271805914, 721.9580234121127, 0.0, 21300.8325839593, 159.9003311790567, 131.1697547944416, 120.38616943816481, 22221.73096925079, 320.69964365567773, 233.75334467955156, 316.2695664394951, 362.6717416539553, 139.85047009658547, 389.54521930322903, 368.11258282604933, 572.328528572082, 28.236165326849914, 22249.16834434215, 22058.572551566547, 553.9478080497943, 22058.572551566547, 647.3057152307795, 1030.1493732165397, 71.26634499074405, 314.57827066058775, 102.94278654070297, 21731.68542144201, 53.72518926307748, 361.7026272353507, 780.9568959083443, 84.85302749745222, 416.89271007558267, 436.30978012763484, 0.0, 573.2395641860967, 274.893154714186, 0.0, 260.4980900764602, 21920.587089639183, 155.51001652765513, 21542.783753244836, 433.8890107844421, 332.6844736255516, 482.0887966735155, 490.7359164617875, 543.1788380521518, 679.6217057974785, 21333.083256121183, 21663.504325613256, 347.5888897347876, 748.4672814450298, 165.4689417190964, 21333.083256121183, 36.51776185388974, 21300.8325839593, 368.11258282604933, 68.84557564755133, 1157.005387198319, 433.8890107844421, 450.2636720512959, 428.1410659349883, 274.1788676067914, 252.42343201169086, 393.92834020681454, 21663.504325613256, 62.59485052679918, 22324.83447472908, 21445.515775000855, 187.27819290585387, 225.5601744572582, 957.2954256052144, 202.70677116509455, 21542.783753244836, 365.41064455384367, 269.4760036143522, 58.23806860860259, 674.6192642265023, 0.0, 433.8890107844421, 243.3119256698437, 159.85658447581773, 100.57982505074642, 799.2996553382858, 200.31347421751292, 259.64558466127994, 22221.73096925079, 146.88854507307337, 144.68319104155518, 274.1788676067914, 46.52077604888632, 413.9015922027516, 159.9003311790567, 929.2919161442095, 134.35923814649777, 21731.68542144201, 561.1793333181602, 754.5886544401199, 963.9672879597595, 129.56402839561815, 148.71845922601597, 1002.0064265033803, 642.2914504328407, 320.69964365567773, 289.6539384399686, 332.6844736255516, 243.3119256698437, 365.6720950955536, 293.4277824488653, 21799.866517270762, 21861.50821377265, 434.25622020139497, 1120.2607495356733, 316.2695664394951, 481.78937008218486, 209.3786335196396, 21333.083256121183, 21799.866517270762, 21367.56778488919, 260.4980900764602, 737.2641377626646, 0.0, 301.1438796116102, 182.977931296031, 21861.50821377265, 142.41423763121827, 21445.515775000855, 21731.68542144201, 247.69504657342918, 39.34236071352984, 694.3871008609024, 892.7741542903198, 437.858478644645, 0.0, 32.49299837118133, 146.88854507307337, 21601.86262911137, 557.6279399294765, 68.18109582875394, 21920.587089639183, 52.132186761144794, 349.5953162381679, 424.29747776214987, 224.70349759403769, 63.56014816278139, 365.41064455384367, 314.57827066058775, 46.52077604888632, 91.23177694705225, 21601.86262911137, 316.35524375720956, 389.54521930322903, 151.55553397105325, 245.02447511567885, 21404.79829131747, 51.91946849712383, 162.96532393045902, 737.2641377626646, 68.84557564755133, 408.5381057532892, 332.6844736255516, 217.9885506124001, 21333.083256121183, 332.6844736255516, 21542.783753244836, 21731.68542144201, 131.4974346150517, 274.1788676067914, 682.4022708910284, 730.7155302324444, 22493.704224592755, 456.33360377593743, 21799.866517270762, 159.33797198334514, 22725.595966622706, 21861.50821377265, 21663.504325613256, 285.0740449232733, 737.2641377626646, 21731.68542144201, 21490.864284747713, 22300.593891562985, 974.027455902288, 21367.56778488919, 343.0244432543427, 72.18638354909143, 345.94325522649, 572.3392928823081, 111.8714994954932, 21972.506558136305, 407.38663514953356, 777.7363821731562, 200.31347421751292, 559.5814921093388, 51.093824434965825, 449.3018270713856, 431.34093914082666, 326.94913401197294, 22370.850057112573, 21731.68542144201, 74.70216152398194, 187.27819290585387, 80.17779792978263, 258.10479312887855, 95.13946919841953, 567.7502063019854, 286.16964644115404, 21663.504325613256, 0.0, 0.0, 486.4771717941782, 22392.77351939919, 199.8471948616163, 461.4668157336611, 46.52077604888632, 357.31446571196363, 1571.7387924826853, 855.3951559404757, 162.96532393045902, 476.4276222805587, 0.0, 0.0, 225.366553346827, 205.91591356255287, 58.23806860860259, 265.1757420045293, 493.94042888345757, 218.15489006381742, 56.145313968199616, 297.0350491619902, 32.25067216188228, 118.13101817781103, 505.1553557751862, 255.89940956852593]

    # np.array
    data_baseline = np.array(data_baseline)
    data_proposed = np.array(data_proposed)

    # bins
    # bins = np.linspace(-1000, 1000, 20)
    bins = np.linspace(0, 1000, 5)
    bin_centers = np.array(bins[:-1]) + np.diff(bins) / 2
    hist1, _ = np.histogram(data_baseline, bins=bins)
    hist2, _ = np.histogram(data_proposed, bins=bins)   
    
    # 
    errs = [250, 500, 1000]
    for err in errs:
        print(np.sum(data_baseline <= err))
        print(np.sum(data_proposed <= err))

    # plt
    print(bins)
    bar_width = (bins[1] - bins[0]) / 3
    plt.bar(bin_centers - bar_width / 2, hist1, label='baseline', color='gray', edgecolor='black', width=bar_width)
    plt.bar(bin_centers + bar_width / 2, hist2, label='proposed', color='c', edgecolor='black', width=bar_width)
    plt.title('Error')
    plt.xlabel('Value')
    plt.ylabel('Frequency')
    plt.legend()

    # グラフの表示
    plt.show()


if __name__ == '__main__':
    main()